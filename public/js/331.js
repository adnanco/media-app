(self.webpackChunk=self.webpackChunk||[]).push([[331],{331:()=>{var t=$("#addressModal"),a=$("#deleteModal");function e(t){$.ajax({type:"GET",url:"/get-country/"+t,dataType:"json"}).done((function(t){var a=t.data;$.each(a,(function(t,a){$("#inputCity").append('<option value="'+a.id+'">'+a.name+"</option>")}))}))}t.on("show.bs.modal",(function(a){var n,o;n=a.relatedTarget.getAttribute("data-target"),o=$("#addressModal form"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"GET",url:"/get-countries",dataType:"json"}).done((function(t){var a=t.data;$.each(a,(function(t,a){$("#inputCountry").append('<option value="'+a.id+'">'+a.name+"</option>")}))})),o.attr("action",n),$.ajax({type:"GET",url:n,dataType:"json"}).done((function(a){var r=a.data;r&&(o.find("#inputType").val("PUT"),t.find(".btn-danger").attr("data-target",n).removeClass("d-none"),e(r.country_name),$("#inputAddressName").val(r.name),$("#inputAddress").val(r.address),$("#inputCountry").val(r.country_name),$("#inputCity").val(r.city_name),$("#inputPostCode").val(r.post_code))}))})),t.on("hide.bs.modal",(function(a){t.find("input").val(""),t.find("form").removeAttr("action"),t.find("#inputType").val("POST"),t.find(".alert").remove()})),$("#inputCountry").on("change",(function(){e($(this).val())})),$("#saveAddress").on("click",(function(){var a;a=$("#addressModal form"),t.find(".alert").remove(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:a.attr("action"),data:a.serialize(),dataType:"json"}).done((function(a){t.find(".btn.btn-secondary").trigger("click")})).fail((function(a,e){var n=a.responseJSON,o="";$.each(n.errors,(function(t,a){o+="<li>"+a+"</li>"})),t.find(".modal-body").prepend('<div class="alert alert-danger"><ul class="mb-0">'+o+"</ul></div>")}))})),$("#btnDelete").on("click",(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:$(this).attr("data-target"),data:{_method:"DELETE"},dataType:"json"}).done((function(){window.location.reload()}))})),a.on("show.bs.modal",(function(t){var a;a=t.relatedTarget.getAttribute("data-target"),$("#btnDelete").attr("data-target",a)}))}}]);